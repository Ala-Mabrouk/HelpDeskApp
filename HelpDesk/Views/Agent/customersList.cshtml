
@using Microsoft.AspNetCore.Mvc.Localization
@inject IViewLocalizer localizer

@model IEnumerable<Entities.Entities.Client>
@{
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}


<script>

    //for Product details
    $(function () {
        var placeholder = $('#placeholder');
        $('a[data-toggle="productsList"]').click(function (event) {

            var url = $(this).data('url');
            $.get(url).done(function (data) {
                placeholder.html(data);
                placeholder.find('.modal').modal('show');
            })


        })

    })
    //adding client
    $(function () {
        var placeholder = $('#placeholder');
        $('a[data-toggle="addClient"]').click(function (event) {

            var url = $(this).data('url');
            $.get(url).done(function (data) {
                placeholder.html(data);
                placeholder.find('.modal').modal('show');
            })


        })

    })


</script>





<div id="placeholder"></div>

<div class="card-header">
    <div style="display: flex;justify-content: space-between; align-items:center;">
        <div>
            <span onclick="history.back(-1)" style="cursor:pointer;"><i class="fas fa-long-arrow-alt-left"></i>&nbsp;&nbsp;</span>

            <i class="fas fa-table mr-1"></i>
            @localizer["Customerstable"]
        </div>
        <a href="#" data-toggle="addClient" data-target="#addClient" data-url="@Url.Action("addClient")"
           class="btn btn-primary">
            <i class="fas fa-plus"></i>&nbsp;@localizer["Addcustomer"]
        </a>
    </div>
</div>

<div class="card-body">
    <table class="table align-middle " id="dataTable" width="100%" cellspacing="0">
        <thead>
            <tr class="table-info table-bordered ">

                <th>
                    @Html.DisplayNameFor(model => model.Id)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.FirstName)
                    <label> </label>
                    @Html.DisplayNameFor(model => model.LastName)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Email)
                </th>

                <th>
                    @Html.DisplayNameFor(model => model.Phone)
                </th>

                <th></th>
            </tr>
        </thead>
        <tfoot>
            <tr class="table-info table-bordered ">

                <th>
                    @Html.DisplayNameFor(model => model.Id)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.FirstName)
                    <label> </label>
                    @Html.DisplayNameFor(model => model.LastName)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Email)
                </th>

                <th>
                    @Html.DisplayNameFor(model => model.Phone)
                </th>

                <th></th>
            </tr>
        </tfoot>
        <tbody>
            @foreach (var item in Model)
            {
                <tr class="align-middle">
                    <td>
                        @item.Id

                    </td>
                    <td>
                        @item.FirstName  <label> </label>@item.LastName
                    </td>

                    <td>
                        @item.Email

                    <td>
                        @item.Phone
                    </td>
                    <td>
                        <a href="#" data-toggle="productsList" data-target="#productsList" data-url="@Url.Action("afectProduct",new { clientMail = item.Email })">@localizer["AffectProduct"]</a> |
                        <a asp-action="clientDetails" asp-controller="Agent" asp-route-mailClient="@item.Email">@localizer["Details"]</a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>
