
@model Entities.Entities.User


@{
    ViewData["Title"] = "Update Agents info ";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";

}

<h1>Agent Permissions for @Html.DisplayFor(model => model.FirstName) @Html.DisplayFor(model => model.FirstName)</h1>

<nav>
    <div class="nav nav-tabs" id="nav-tab" role="tablist">
        <a class="nav-item nav-link active" id="nav-profile-tab" data-toggle="tab" href="#nav-profile" role="tab" aria-controls="nav-profile" aria-selected="true">Profile</a>
        <a class="nav-item nav-link " id="nav-permissions-tab" data-toggle="tab" href="#nav-permissions" role="tab" aria-controls="nav-permissions" aria-selected="false">Permissions</a>

    </div>
</nav>
<div class="tab-content" id="nav-tabContent">

    @*//for permission mangement*@

    <div class="tab-pane fade " id="nav-permissions" role="tabpanel" aria-labelledby="nav-permissions-tab">
        <div class="dx-box-decorated">

            <form method="post" asp-action="validatePermissions" asp-controller="Admin" class="dx-form">
                <div class="dx-box-content">

                    @foreach (var item in ViewBag.Permissions)
                    {
                        Boolean test = false;
                        if (ViewBag.AgentPermission.Contains(item))
                        {
                            test = true;
                        }
                        <div class="form-check">
                            <input class="form-check-input" name="AreChecked" type="checkbox" value="@item.permissionId" checked=@test />
                            <label class="form-check-label" for="@item.permissionName">
                                @item.permissionName
                            </label>

                        </div>
                    }
                    <input type="hidden" name="agentId" value="@Model.Id" />
                    <input type="hidden" name="agentMail" value="@Model.Email" />
                    <button type="submit" class="dx-btn-dark ">Click</button>
                </div>
            </form>

        </div>


    </div>

    @*//for personal info update*@

    <div class="tab-pane fade show active" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab">

        @await Component.InvokeAsync("UpdateUserInfo" ,@Model); 

    </div>
</div>

